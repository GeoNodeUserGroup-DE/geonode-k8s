apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: geonode-postgresql
spec:
  teamId: "geonode"
  volume:
    size: {{ .Values.postgres_operator_manifest.storageSize }}
  numberOfInstances: {{ int .Values.postgres_operator_manifest.numberOfInstances }}
  users:
    postgres:
    - superuser
    geonode:
    - superuser
    - createdb
    - login
    geogeonode:
    - superuser
    - createdb
    - login
  databases:
    geonode: geonode
    geogeonode: geogeonode
  preparedDatabases:
    geogeonode:
      schemas:
        public: {}
      extensions:
        pg_partman: public
        postgis: public
    geonode:
      schemas:
        public: {}
      extensions:
        pg_partman: public
        postgis: public
  postgresql:
    version: {{ .Values.postgres_operator_manifest.postgres_version | quote }}